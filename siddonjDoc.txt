==============================
Title: Url validator doesn't correctly identify an authority from a different country as valid.

Class: Logic Error

Date: 3/9/16
Reported By: Justin Siddon
Email: siddonj@oregonstate.edu


Product:    URL Validator
Platform:   OSx                  Version: 10.11.3
Browser:    NA


Is it reproducible: Yes

Description
===========
 When a top-level domain authority is entered other than the United States, the 
 urls are marked as invalid.


Steps to Produce/Reproduce
--------------------------
String url = "http://www.google.ru";
UrlValidator validator =  new UrlValidator();
boolean urlValid = validator.isValid(url);

Expected Results
----------------
urlValid == true;


Actual Results
--------------
urlValid == false;


Workarounds
-----------
If you look in DomainValidator.java, the array of valid country codes (COUNTRY_CODE_TLDS)
only contains values up to Italy. Beyond Italy no other countries will return as a valid top level domain.
This should include all countries with a top level domain.


Attachments
-----------
none


Other Information
-----------------
Localizing the bug with Agan's principles: I first began by observing url's in my test results that look like they should have passed
but were failing. Since I wasn't sure of the domain that was causing the fault I began to do an in depth review of the isValid()
method. This was using Agan's first rule "Understand the system under test". Next I used the "Make if Fail" principle 
and directly passed failing urls into the isValid() method, that way I was sure it was isValid creating the error and not
something in our test suite. None of my results where change by passing urls directly into isValid so that means
there is a bug in isValid. Next I removed invalid input domain's one at a time until I only had 'valid' input domains (every url
I generated should pass). This was Agan's 5 principle, "Change one thing at a time". This allowed me to fully localize
the input domain causing the fault, the url authority. I then returned to Agan's first rule to ensure I understood how 
the authority was validated with my urls that were failing. Stepping through the isValid code line by line lead me to 
COUNTRY_CODE_TLDS array of strings being used to validate the top level domain. Since the url "google.ru" was failing I looked
to see if it did contain the "ru" top level domain. It didn't, which caused isValid()'s call to isValidTld() to return
false, making the url invalid. 



testDomainPartitions Description:

The testDomainPartitions method steps through an array of input domains, calling the isValid method on each potential url 
combination. What make this method helpful for testing is each url is passes to the isValid method consists of valid
url piece combinations except for a single element. For example a possible url it will pass to isValid is "http//www.google.com/test/testing?t=1"
what makes this url example helpful is only the url scheme portion of the url is invalid. This lets implements Agan's
5th testing principle "Only change 1 thing at a time" automatically across multiple tests, helping us localize bugs.

